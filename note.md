# 性能优化
## 资源缓存及更新
* 采用http响应头 `Expires`,`ETag`,`Cache-Control`实现静态资源(css,js,图片etc)的缓存
* 缓存更新
对于静态资源缓存更新的问题，目前来说最优方案就是 基于文件内容的hash版本冗余机制 了。也就是说，我们希望项目源码是这么写的：

`<script type="text/javascript" src="a.js"></script>`
发布后代码变成

`<script type="text/javascript" src="a_8244e91.js"></script>`
也就是a.js发布出来后被修改了文件名，产生一个新文件，并不是覆盖已有文件。其中”_82244e91”这串字符是根据a.js的文件内容进行hash运算得到的，只有文件内容发生变化了才会有更改。由于将文件发布为带有hash的新文件，而不是同名文件覆盖，因此不会出现上述说的那些问题。同时，这么做还有其他的好处：
上线的a.js不是同名文件覆盖，而是文件名+hash的冗余，所以可以先上线静态资源，再上线html页面，不存在间隙问题；
遇到问题回滚版本的时候，无需回滚a.js，只须回滚页面即可；
`由于静态资源版本号是文件内容的hash，因此所有静态资源可以开启永久强缓存，只有更新了内容的文件才会缓存失效，缓存利用率大增；
以文件内容的hash值为依据生产新文件的非覆盖式发布策略是解决静态资源缓存更新最有效的手段。`